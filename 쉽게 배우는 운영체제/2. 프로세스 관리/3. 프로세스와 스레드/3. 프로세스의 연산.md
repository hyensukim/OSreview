# 프로세스의 구조
- 코드 영역 : 프로그램의 본문이 저장되는 영역.(읽기 전용)
- 데이터 영역 : 코드 실행에 필요한 변수나 파일 안에 데이터를 저장하는 영역.(읽기와 쓰기 모두 가능.)
- 스택 영역 : 운영체제가 프로세스를 실행하기 위해 부수적으로 필요한 데이터를 모아놓은 영역.(사용에게 보이지 않음.)
    - Ex) 호출된 함수의 수행을 마치고 복귀할 주소 및 데이터(지역 변수, 매개변수. 반환 값 등)를 임시로 저장하는 공간.

# 프로세스 생성과 복사
## 프로세스 생성
- 새로운 프로세스 생성 과정은 사용자가 프로그램을 실행하면 운영체제가 프로그램을 코드영역에 옮겨 놓은 다음에 프로세스 제어 블록을 생성한다. 그리고 데이터 영역 및 스택 영역을 위한 메모리를 확보한 뒤 프로세스를 실행하게 된다.
## 프로세스 복사
- 프로세스를 복사하는 방법은 커널에서 제공하는 fork() 시스템 호출을 통해 실행중인 프로세스로부터 새로운 프로세스를 복사하게 된다. 이 때 실행중이던 프로세스를 '부모 프로세스', 새로 생긴 프로세스를 '자식 프로세스'라고 한다. 두 프로세스는 부모-자식 관계일 뿐 각각의 독립적인 프로세스이다.

### fork() 시스템 호출 장점
- 프로세스 생성 속도가 빠르다.

- 추가 작업 없이 자원의 상속이 가능하다.

- 시스템 관리를 효율적으로 할 수 있다.
    - 부모-자식 관계의 경우, 자식 프로세스 종료 시 자원 회수를 부모 프로세스에서 수행한다. 이로 인해, 운영체제가 직접 자원을 회수하지 않고 부모 프로세스에게 맡김으로서 효율이 올라간다.

### 동작과정
- fork() 시스템 호출의 동작과정을 자세히 보면, 프로세스를 똑같이 복사하지만 프로세스 제어 블록 내 몇몇 정보는 변경된다.
    - 프로세스 구분자
    - 부모 프로세스 구분자 && 자식 프로세스 구분자
    - 메모리 관련 정보

# 프로세스의 전환
- 커널에서 제공하는 exec() 시스템 호출을 통해서 기존의 프로세스를 새로운 프로세스로 전환해준다.
- 프로세스 전환의 목적은 프로세스의 구조는 그대로 유지한 상태에서 내부 코드만 교체하여 프로세스 구조를 재활용하는 것이다.
- exec() 시스템 호출을 사용하면 이미 만들어진 프로세스 제어 블록, 메모리 영역, 부모-자식 관계를 그대로 사용이 가능하여 편리하다.

# 프로세스의 계층구조
- 프로세스 계층 구조는 유닉스 계층구조에 빗대어 표현할 수 있다. 하나의 프로세스를 생성한 뒤 나머지 프로세스들을 하나의 프로세스의 자식 프로세스로 생성하여 프로세스의 계층을 부모-자식 관계로 유지한다.

## 프로세스의 계층구조 장점
- 여러 작업을 동시에 처리 가능하다.
    - Ex) 여러 사용자가 동시에 로그인하는 경우, 로그인 프로세스를 fork() 시스템 호출을 사용하여 요청한 갯수만큼 프로세스를 복사하여 처리 가능하다. 또한, exec() 시스템 호출을 통해 기존의 프로세스를 다음으로 작업할 프로세스로 전환해주면 자원 낭비도 줄일 수 있어 효율적이다.

- 그 다음으로 자원 회수에 용이하다. 부모-자식 관계에서 자식 프로세스 작업 종료 시 부모가 자원을 회수 및 정리해주어 운영체제는 별도로 회수 작업을 하지 않아도 된다.

## 고아 프로세스와 좀비 프로세스
- 이러한 부모-자식 관계의 프로세스에도 문제점은 존재한다. 자식 프로세스보다 부모 프로세스가 먼저 종료된 경우, 자식 프로세스는 자원을 회수해줄 부모 프로세스가 사라진 고아 상태가 되며, 이를 고아프로세스라고 한다. 또한, 자식 프로세스 종료 이후에 부모 프로세스에서 자원을 회수하는 작업을 수행하지 않는 경우도 발생하는데 이때 남은 프로세스를 좀비 프로세스라고 한다.

- 이처럼 고아 프로세스 또는 좀비 프로세스의 양이 많아질수록 메모리의 자원낭비가 커져 효율이 떨어지게 된다. 따라서 운영체제는 이처럼 반환되지 못한 자원을 주기적으로 회수해줘야 한다.
