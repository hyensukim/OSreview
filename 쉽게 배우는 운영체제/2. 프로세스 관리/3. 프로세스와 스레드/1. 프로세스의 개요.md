# 프로세스의 개념
- 프로그램은 저장장치에 저장된 정적인 상태를 말한다
- 프로그램이 실행을 위해 메모리에 올라온 동적인 상태가 프로세스다. 프로세스를 실행하는 데 필요한 정보를 보관하는 자료구조를 프로세스 제어블록(PCB)이라 하는데, 이는 운영체제에 의해 커널 영역에 만들어 진다.

# 프로그램에서 프로세스로의 전환
- 프로그램에서 프로세스로 전환되려면 프로세스 제어 블록 일명, PCB를 운영체제로부터 얻어야 한다. 즉, 프로그램에서 PCB를 얻으면 프로세스가 되고, PCB를 폐기하면 프로세스가 종료되었다는 것을 의미한다.

- PCB에 대해 간략히 설명하자면, 프로세스 처리 시 필요한 정보들이 저장된 자료구조이다. 대표적으로 프로세스 구분자, 메모리 관련 정보, 각 종 중간값 등을 저장하고 있다.
    - 프로세스 구분자 : 메모리 내 여러 프로세스 들이 존재하며, 이를 구분하는 구분자이다.
    - 메모리 관련 정보 : CPU에서 프로세스 실행을 위해서는 프로세스의 위치 정보가 필요하며, 메모리 보호를 위한 경계/한계 레지스터도 함께 저장한다.
    - 각 종 중간값 : 시분할 시스템에서 프로세스는 타임 슬라이스의 시간 동안만 작업이 진행된 뒤 다음 자신의 작업 전까지 멈춰있게 된다. 이 때, 작업했던 부분부터 다음 작업을 시작할 수 있도록 중간 데이터를 저장한다.

- <mark>중요한 점은 컴퓨터 내에 일반 사용자가 실행한 사용자 프로세스 이외에도 운영체제의 커널 프로세스가 섞여서 실행된다는 점이다.</mark>

# 프로세스의 상태
## 프로세스의 기본 상태
- `생성 상태` : 저장장치에 저장되어 있던 프로그램이 메모리에 올라오고 운영체제로부터 프로세스 제어 블록을 할당 받은 상태.
- `준비 상태` : CPU는 한번에 하나의 작업만 가능하기 때문에, 이를 위해 실행 전 프로세스가 자기 순서를 기다리는 상태. 각 프로세스는 준비큐에서 기다리며 어떤 프로세스가 실행될 지 정하는 작업은 ‘CPU 스케줄러’에 의해서 결정된다.
- `실행 상태` : CPU 스케줄러에 의해 정해진 프로세스가 타임 슬라이스 만큼 CPU를 얻어 작업을 처리하는 상태. 이를 dispatch 되었다고 한다. 주어진 시간이 지난 뒤에도 작업이 끝나지 않은 경우 인터럽트가 발생하여 다시 준비 상태로 되돌아가게 되며 이를 time-out이라 한다.
    - 새로운 프로세스가 실행상태로 들어오면 CPU는 일정 시간이 흐른 뒤 알려달라고 클록에게 요청한다. 클록은 일정 시간이 지나면 인터럽트를 사용하여 CPU에게 알려준다.
- `완료 상태` : 프로세스가 주어진 타임 슬라이스 동안에 작업을 완료하여 종료된 상태. 사용했던 자원 반납 및 메모리 삭제, PCB가 폐기된 상태이다.
    - 만약, 오류나 다른 프로세스에 의해 비정상적으로 종료되는 강제 종료 시에 디버깅을 위해 강제 종료 직전의 메모리 상태를 저장장치로 옮기게 되는데 이를 '코어 덤프'라고 한다.

> 관련 개념
- 타임 슬라이스(타임 퀀텀) : 시분할 시스템에서, 분할된 시간 단위로 프로세스에 배당된 작업 시간을 말한다.
- CPU 스케줄러 : 준비 상태에 있는 여러 프로세스 중 다음에 실행할 프로세스를 선정하는 일을 담당.
- 디스패치(dispatch) : 준비 상태의 프로세스 중 하나를 골라 실행 상태로 바꾸는 CPU 스케줄러의 작업.
- 타임아웃(time-out) : 타임 슬라이스 동안 작업을 끝내지 못하면 다시 준비상태로 돌아가는 것.
    - CPU는 타임 슬라이스의 시간이 흐른 뒤 알림을 클록에 요청하며, 클록은 일정 시간이 다 되면 인터럽트를 사용하여, CPU에게 알려준다.

## 프로세스의 다섯 가지 상태
![그림](https://raw.githubusercontent.com/hyensukim/OSreview/master/images/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%20%EA%B4%80%EB%A6%AC/KakaoTalk_20230613_133352106.jpg)

- 기본 상태 + 대기 상태
- `대기 상태` : CPU의 작업 효율을 위해서 추가된 상태. 실행 상태의 프로세스에서 입출력 작업을 요청한 경우 입출력 작업이 완료될 때까지 대기하는 상태. 이 상태의 프로세스는 입출력장치별로 마련된 큐에서 기다린다. 해당 프로세스의 입출력 작업이 완료되면, 인터럽트가 발생하고 해당 프로세스는 준비 상태로 변환된다.

## 휴식 상태와 보류 상태
- 대부분의 프로세스는 다섯 가지 상태로 운영되며 이를, '활성 상태'라고 한다.
- `휴식 상태`
    - 프로세스가 작업을 일시적으로 쉬고 있는 상태.
    - 사용하던 데이터가 메모리에 그대로 있고 PCB도 유지된 상태.
- `보류 상태`
    - 프로세스가 메모리에서 잠시 쫒겨난 상태.(일시 정지 상태)
    - 프로세스가 보류 상태 되는 경우.
        - 메모리가 꽉 찬 경우.
        - 프로그램에 오류가 있어서 실행을 미뤄야 하는 경우.
        - 바이러스와 같이 악의적인 공격을 하는 프로세스라고 판단되는 경우.
        - 매우 긴 주기로 반복되는 프로세스라 메모리 밖으로 쫓아내도 큰 문제가 없는 경우.
        - 입출력을 기다리는 프로세스의 입출력이 계속 지연되는 경우.
    - 보류 상태에 들어간 프로세스는 '스왑 영역'이라는 임시 보관소에 보관된다.
    - 보류 대기 상태 : 대기 상태에서 보류 상태로 옮겨진 경우
    - 보류 준비 상태 : 준비 상태에서 보류 상태로 옮겨진 경우
    - 보류 대기 상태에서 입출력 완료 시 보류 준비 상태로 옮겨 간다.